{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Stream — {{ game.title }}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        iframe { width: 100%; height: 480px; border: 1px solid #ddd; }
        .qr-box { text-align: center; padding: 10px; border: 1px solid #eee; }
        .qr-box img { max-width: 100%; height: auto; }
    </style>
</head>
<body>
    <h1>{{ game.title }}</h1>
    <div class="container">
                <div>
                        <!-- Use per-game embed HTML if admin pasted full iframe, otherwise use URL or placeholder -->
                        {% if game.video_url %}
                            {% if '<iframe' in game.video_url %}
                                {{ game.video_url|safe }}
                            {% else %}
                                <iframe src="{{ game.video_url }}" title="Видео"></iframe>
                            {% endif %}
                        {% else %}
                            <iframe src="about:blank" title="Video placeholder">Ваш браузер не поддерживает iframe.</iframe>
                        {% endif %}
                        <p>{{ game.description }}</p>
                </div>
        <aside class="qr-box">
            <h3>Регистрация</h3>
            <p>Отсканируйте QR код, чтобы зарегистрироваться на игру</p>
            <div>
                <img alt="QR code" src="data:image/png;base64,{{ qr_base64 }}" />
            </div>
            <p><small>URL: <a href="{{ registration_path }}">{{ registration_path }}</a></small></p>
        </aside>
    </div>

    <!-- Note: later this page can open a WebSocket to show/hide QR based on server messages -->
</body>
</html>
